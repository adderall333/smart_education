{% extends 'main/base.html' %}

{% block title %}
Изменить вопрос
{% endblock %}

{% block script %}
{% load static %}
<script type="text/javascript" src="{% static 'test_constructor/test_constructor.js' %}"></script>
{% endblock %}

{% block navlinks %}
  <a class="nav-link" href="/">Главная страница</a>
  <a class="nav-link" href="/accounts/home">Личный кабинет</a>
  <a class="nav-link" href="{% url 'logout'%}">Выйти</a>
{% endblock %}

{% block maincontent %}
  <form method="POST" id="form" info="{{options.count}}" class="text-left">
        {% csrf_token %}
        <div class="form-group">
            <label>Текст вопроса</label>
            <textarea class="form-control" name="text" required>{{ question.text }}</textarea>
        </div>
        <div>
            <label>Стоимость вопроса</label>
            <input type="number" name="amount_of_points" value="{{question.amount_of_points}}" required>
        </div>
        <div>
            <label>Картинка</label>
            <input type="file" name="image" accept="image/*">
        </div>
        <label>Варианты ответа</label>
        <div id="input0"></div>
        <div class="mt-1">
          <button class="btn btn-sm btn-secondary" type="button" onclick="addInput()">+</button>
          <button class="btn btn-sm btn-secondary" type="button" onclick="removeInput()">-</button>
        </div>
        <div class="mt-2"><input class="btn btn-secondary" type="submit" value="Изменить вопрос"></div>
    </form>
<script>
    var i = 1;
    {% for option in options %}
        document.getElementsByName('option' + i)[0].setAttribute("value", "{{option.text}}")
        {% if option.is_correct %}
            document.getElementsByName('correct' + i)[0].setAttribute("checked", "checked")
        {% endif %}
        i++;
    {% endfor %}
</script>
{% endblock %}